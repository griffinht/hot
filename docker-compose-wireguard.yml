services:
  wireguard:
    image: place1/wg-access-server
    build:
       dockerfile: wireguard/Dockerfile
       context: .
    restart: unless-stopped
    cap_add:
      - NET_ADMIN
    volumes:
      - "wg-access-server-data:/data"
      - "./wireguard/config.yaml:/config.yaml"
    ports:
      - "8000:8000/tcp"
      - "80:51820/udp"
    devices:
      - "/dev/net/tun:/dev/net/tun"

# shared volumes with the host
volumes:
  wg-access-server-data:
    driver: local
