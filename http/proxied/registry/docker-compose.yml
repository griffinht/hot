networks:
    internal:
        driver: bridge
        internal: true
volumes:
    registry:
        external: true
    http_passwd:
        external: true
services:
    registry:
        image: registry:2@sha256:6060f78eda124040cfeb19d2fcc9af417f5ee23dc05d0894fcfe21f24c9cbf9a
        restart: unless-stopped
        volumes:
            - registry:/var/lib/registry:ro
        networks:
            - internal
        environment:
            - REGISTRY_HTTP_HOST=https://registry.griffinht.com
    registry_write:
        image: registry:2@sha256:6060f78eda124040cfeb19d2fcc9af417f5ee23dc05d0894fcfe21f24c9cbf9a
        restart: unless-stopped
        volumes:
            - registry:/var/lib/registry
            - http_passwd:/passwd:ro
        networks:
            - internal
        environment:
            - AUTH_HTPASSWD_REALM=hot
            - AUTH_HTPASSWD_PATH=/htpasswd/.htpasswd
            - REGISTRY_HTTP_HOST=https://registry-write.griffinht.com
    registry_ui:
        image: joxit/docker-registry-ui@sha256:88b3284a3c97b57591ca17f5b167b34a71ed2f5645f0fe9cd114e7684e136bea
        restart: unless-stopped
        networks:
            - internal
