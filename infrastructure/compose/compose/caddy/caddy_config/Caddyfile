{
    log debug
    #auto_https off
}

# todo registry and ui registry
http://{$DOMAIN} {
    #log info
    respond 404
    #reverse_proxy http://cloudtest.lan.hot.griffinht.com:80 {
    #    header_up Host griffinht.com
    #}
}

# todo auth
http://budget.{$DOMAIN} {
    log info
    reverse_proxy {
        to actualbudget:5006
        health_uri /sdfghgh
    }
}

http://miniflux.{$DOMAIN} {
    log info
    reverse_proxy {
        to host.docker.internal:8080
        health_uri /healthcheck
        header_up x-forwarded-user griffin
    }
}

https://vaultwarden.{$DOMAIN} {
    tls /certificates/live/cool.griffinht.com/fullchain.pem /certificates/live/cool.griffinht.com/privkey.pem
    reverse_proxy {
        to vaultwarden:80
        health_uri /alive
    }
}

http://netdata.{$DOMAIN} {
    # https://github.com/netdata/netdata/pull/9172/files
    reverse_proxy {
        to host.docker.internal:19999
        health_uri /api/v1/info
    }
}

http://prometheus.{$DOMAIN} {
    reverse_proxy prometheus:9090
    reverse_proxy {
        to grafana:3000
        health_uri /
    }
}

http://grafana.{$DOMAIN} {
    reverse_proxy {
        to grafana:3000
        health_uri /api/health
    }
}

http://yacht.{$DOMAIN} {
    reverse_proxy {
        to yacht:8000
        health_uri /
    }
}

http://admin.{$DOMAIN} {
    reverse_proxy {
        health_uri /dklfjghsdfg
        health_status 404

        to localhost:2019
        header_up Host localhost:2019
    }
}

https://searxng.{$DOMAIN} {
    tls /certificates/live/cool.griffinht.com/fullchain.pem /certificates/live/cool.griffinht.com/privkey.pem
    reverse_proxy {
        to searxng:8080
        health_uri /healthz
    }
}

https://redlib.{$DOMAIN} {
    tls /certificates/live/cool.griffinht.com/fullchain.pem /certificates/live/cool.griffinht.com/privkey.pem
    reverse_proxy {
        to redlib:8080
        health_uri /settings
    }
}

https://syncthing.{$DOMAIN} {
    tls /certificates/live/cool.griffinht.com/fullchain.pem /certificates/live/cool.griffinht.com/privkey.pem
    reverse_proxy {
        to syncthing:8384
        health_uri /rest/noauth/health
    }
}

https://dockge.{$DOMAIN} {
    tls /certificates/live/cool.griffinht.com/fullchain.pem /certificates/live/cool.griffinht.com/privkey.pem
    reverse_proxy {
        to dockge:5001
        health_uri /
    }
}

https://tty.{$DOMAIN} {
    tls /certificates/live/cool.griffinht.com/fullchain.pem /certificates/live/cool.griffinht.com/privkey.pem
    reverse_proxy {
        to tty:8080
        health_uri /
    }
}

https://*.{$DOMAIN} {
    tls /certificates/live/cool.griffinht.com/fullchain.pem /certificates/live/cool.griffinht.com/privkey.pem
    reverse_proxy {
        to traefik:80
        health_port 8080
        health_uri /ping
    }
}

https://traefik.{$DOMAIN} {
    tls /certificates/live/cool.griffinht.com/fullchain.pem /certificates/live/cool.griffinht.com/privkey.pem
    reverse_proxy {
        to traefik:8080
        health_uri /ping
    }
}
