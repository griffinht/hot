volumes:
    mail:
        external: true
    http_certificates:
        external: true
services:
    maddy:
        build: maddy
        restart: unless-stopped
        ports:
            - 25:25
            - 465:465
            - 993:993
        volumes:
            - mail:/mail
            - http_certificates:/certificates
        environment:
            MADDY_HOSTNAME: mx1.griffinht.com
            MADDY_DOMAIN: griffinht.com
            TLS_CERT: /certificates/griffinht.com/fullchain.cer
            TLS_KEY: /certificates/griffinht.com/griffinht.com.key
# todo ensure certificates exist before maddy starts
